{% extends "base.html" %}

{% load static %}

{% block subtitolo %}Krei novan proponon{% endblock subtitolo %}

{% block enhavo %}
<h1>Krei novan proponon</h1>

<script>
	$(function() {
		// this is on click event just to demo.
		// You would probably run this at page load or quantity change.
		$("#nombro_eblaj_elektoj").change(function() {
			document.write("Hallo!");
			// update total form count
			quantity = $("#nombro_eblaj_elektoj").val();
			$("#total_form").val(quantity);

			// copy the template and replace prefixes with the correct index
			for (i = 0; i < quantity; i++) {
				// Note: Must use global replace here
				html = $("#form_template").clone().html().replace(/__prefix_/g, i);
				$("#forms").append(html);
			};
		})
	})
</script>
<form method="post" id="total_form" action="">{% csrf_token %}
	{{ propono_form.as_p }}
	{{ elektoj_formset.management_form }}
	<div style="display:none;" id="form_template">
		{{ elektoj_formset.as_p }}
	</div><!-- stores empty form for javascript -->
	<div id="forms"></div><!-- where the generated forms go -->
	<button type="submit" class="save btn btn-default">Enregistrigi</button>
</form>

{% endblock enhavo %}
